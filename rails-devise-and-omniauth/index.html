<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/blog-gatsby/component---src-layouts-index-js-27b0a05b07475d6e6f17.js" as="script"/><link rel="preload" href="/blog-gatsby/component---src-templates-post-js-8aa746c353446545c65f.js" as="script"/><link rel="preload" href="/blog-gatsby/path---rails-devise-and-omniauth-e150375fe4cbd2c9ad67.js" as="script"/><link rel="preload" href="/blog-gatsby/app-b8e603c6e6241e379fb4.js" as="script"/><link rel="preload" href="/blog-gatsby/commons-8b3777e9b7196ecd4564.js" as="script"/><title data-react-helmet="true">Joel HÃ¶lting</title><meta data-react-helmet="true" name="description" content="Full Stack Web Developer"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.666 'Libre Baskerville',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Libre Baskerville',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;color:hsla(0,0%,0%,1);font-family:'Raleway',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;color:hsla(0,0%,0%,1);font-family:'Raleway',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;color:hsla(0,0%,0%,1);font-family:'Raleway',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;color:hsla(0,0%,0%,1);font-family:'Raleway',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;color:hsla(0,0%,0%,1);font-family:'Raleway',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;color:hsla(0,0%,0%,1);font-family:'Raleway',sans-serif;font-weight:800;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}ul{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;font-size:0.85rem;line-height:1.666rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;font-size:1rem;line-height:1.666rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}blockquote{margin-left:1.11067rem;margin-right:1.11067rem;margin-top:1.11067rem;padding-bottom:0;padding-left:1.11067rem;padding-right:0;padding-top:0;margin-bottom:1.11067rem;color:hsla(0,0%,0%,0.7340000000000001);border-left:4px solid #999;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.11067rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.11067rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.11067rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.666rem;margin-bottom:calc(1.11067rem / 2);margin-top:calc(1.11067rem / 2);}li > ul{margin-left:1.666rem;margin-bottom:calc(1.11067rem / 2);margin-top:calc(1.11067rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.11067rem / 2);}code{font-size:0.85rem;line-height:1.666rem;}kbd{font-size:0.85rem;line-height:1.666rem;}samp{font-size:0.85rem;line-height:1.666rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.11067rem;padding-right:1.11067rem;padding-top:0.833rem;padding-bottom:calc(0.833rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}@media only screen and (max-width:480px){html{font-size:80%;line-height:1.4999999999999998;}}a{font-weight:bold;color:#00f;text-decoration:none;}a:hover{text-decoration:underline;}</style><link href="//fonts.googleapis.com/css?family=Raleway:800|Libre+Baskerville:400,400i,700" rel="stylesheet" type="text/css"/><style id="gatsby-inlined-css">#navButton{width:200px;height:25px;position:fixed;top:0;left:50%;transform:translateX(-50%);background:#24255d;transition:all .2s linear;text-align:center;color:#fff;font-family:Code Bold;z-index:1;cursor:pointer;border-radius:0 0 20px 20px}@media (min-width:700px){#navButton.inactive:hover{width:225px;height:40px;padding-top:5px}}#navButton.active{width:100vw;height:100vh;border-radius:0}#navButton div#navMenu{height:100%;display:flex;align-items:center;justify-content:center}#navButton div#navMenu ul{list-style-type:none}#navButton div#navMenu ul li{font-size:4rem;opacity:0;text-shadow:2px 2px #000}#navButton div#navMenu ul li:first-child{animation:opacity .5s linear forwards}#navButton div#navMenu ul li:nth-child(2){animation:opacity .5s .1s linear forwards}#navButton div#navMenu ul li:nth-child(3){animation:opacity .5s .2s linear forwards}#navButton div#navMenu ul li:nth-child(4){animation:opacity .5s .3s linear forwards}#navButton div#navMenu ul li a{color:#c60000}@keyframes opacity{0%{opacity:0}50%{opacity:0}to{opacity:1}}@font-face{font-family:Code Bold;src:url(/blog-gatsby/static/code_bold.1caba215.woff) format("woff")}@font-face{font-family:Code Light;src:url(/blog-gatsby/static/code_light.213d933a.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style></head><body><div id="___gatsby"><div data-radium="true" data-reactroot="" data-reactid="1" data-react-checksum="1357232241"><!-- react-empty: 2 --><div data-reactid="3"><div id="navButton" class="inactive" data-reactid="4">navigation</div></div><div style="margin:5vh auto;max-width:980px;width:95%;" data-radium="true" data-reactid="5"><div data-reactid="6"><h1 data-reactid="7">Implement Devise and Omniauth in Rails</h1><h2 data-reactid="8">January 13, 2017</h2><div data-reactid="9"><p>How to add Devise and Omniauth to your new Rails application:</p>
<h4>Step 1: Generate Your Rails Application</h4>
<p><code>rails new MyApplication</code></p>
<h4>Step 2: Add the devise gem to your Gemfile</h4>
<p><code>gem 'devise'</code></p>
<p><code>bundle install</code></p>
<h4>Step 3: Install Devise and a Devise User</h4>
<p><code>rails generate devise:install</code></p>
<p><code>rails generate devise User</code></p>
<p>I also want to add two additional columns (or attributes) to my Users table. I want to add user attributes for a provider and a uid. This is data we will receive from our Omniauth provider and will be saved to the database.<br></p>
<p><code>rails g migration AddColumnsToUsers provider uid</code></p>
<p>The above command will create two columns that are strings by default.</p>
<p>Now run the pending migrations with <code>rake db:migrate</code></p>
<h4>Step 4: Create View Partials (Optional)</h4>
<p>Now we will create two partials to render in our main application.html.erb. One is a navbar that will display links dependent on whether the current user is logged in. The other partial renders flash messages if they exist.</p>
<p><code>app/views/layouts/_messages.html.erb:</code></p>
<div class="gatsby-highlight">
      <pre class="language-html"><code>&lt;%= content_tag(:div, flash[:error], :id => "flash_error") if flash[:error] %>
&lt;%= content_tag(:div, flash[:notice], :id => "flash_notice") if flash[:notice] %>
&lt;%= content_tag(:div, flash[:alert], :id => "flash_alert") if flash[:alert] %>
</code></pre>
      </div>
<p><code>app/views/layouts/_navigation.html.erb:</code></p>
<div class="gatsby-highlight">
      <pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">if</span> <span class="token attr-name">current_user</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>Hello,&lt;%= current_user.email %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>&lt;%= link_to "Log Out", destroy_user_session_path, :method => "delete" %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">else</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>&lt;%= link_to "Sign In", new_user_session_path %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>&lt;%= link_to "Sign Up", new_user_registration_path %><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">end</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>
</code></pre>
      </div>
<p>And finally call the partials in app/views/layouts/application.html.erb:</p>
<div class="gatsby-highlight">
      <pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>MyApplication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    &lt;%= render 'layouts/messages' %>
    &lt;%= render 'layouts/navigation' %>
    &lt;%= yield %>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre>
      </div>
<h4>Step 5: Implement Omniauth</h4>
<p>Head over to the <a href="https://github.com/omniauth/omniauth">Omniauth gem on Github</a> and read the documentation to familiarize yourself with how it works. There is also a <a href="https://github.com/omniauth/omniauth/wiki/List-of-Strategies">community maintained list</a> of providers that your app can use to login/create new users via Omniauth. They range from well-known services like Google to obscure providers that you've probably never heard of before.</p>
<p>Once you choose a provider, read the documentation on its github page and find out how to connect your app to the provider. Amazon and Facebook have developer pages that allow you to connect your app. You will give the provider a callback URL within your app so they know where to send the user data. Most importantly, they will provide you with an <strong>AppID</strong> and a <strong>SecretID</strong> which you will add to your App. Read the documentation of your selected provider for more info on the details.</p>
<p>For this tutorial, I chose Amazon as the provider.</p>
<p>Now we need to add some more devise features to the Devise User Model. We will also create a class method for finding or creating a new user based on the hash we receive from our Oauth provider callback.</p>
<p>Add the following code to /app/models/user.rb:</p>
<div class="gatsby-highlight">
      <pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token operator">&lt;</span> <span class="token constant">ActiveRecord</span><span class="token punctuation">:</span><span class="token symbol">:Base</span>
  devise <span class="token symbol">:database_authenticatable</span><span class="token punctuation">,</span> <span class="token symbol">:registerable</span><span class="token punctuation">,</span>
         <span class="token symbol">:recoverable</span><span class="token punctuation">,</span> <span class="token symbol">:rememberable</span><span class="token punctuation">,</span> <span class="token symbol">:trackable</span><span class="token punctuation">,</span> <span class="token symbol">:validatable</span><span class="token punctuation">,</span>
     <span class="token symbol">:omniauthable</span><span class="token punctuation">,</span> <span class="token symbol">:omniauth_providers</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token symbol">:amazon</span><span class="token punctuation">]</span>
     <span class="token comment">#substitute your provider here</span>

  <span class="token keyword">def</span> <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">from_omniauth</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span>
      <span class="token function">where</span><span class="token punctuation">(</span>provider<span class="token punctuation">:</span> auth<span class="token punctuation">.</span>provider<span class="token punctuation">,</span> uid<span class="token punctuation">:</span> auth<span class="token punctuation">.</span>uid<span class="token punctuation">)</span><span class="token punctuation">.</span>first_or_create <span class="token keyword">do</span> <span class="token operator">|</span>user<span class="token operator">|</span>
        user<span class="token punctuation">.</span>provider <span class="token operator">=</span> auth<span class="token punctuation">.</span>provider
        user<span class="token punctuation">.</span>uid <span class="token operator">=</span> auth<span class="token punctuation">.</span>uid
        user<span class="token punctuation">.</span>email <span class="token operator">=</span> auth<span class="token punctuation">.</span>info<span class="token punctuation">.</span>email
        user<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token constant">Devise</span><span class="token punctuation">.</span>friendly_token<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span>
      <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre>
      </div>
<p>Now add your <strong>AppID</strong> and <strong>SecretID</strong> to /config/initializers/devise.rb:</p>
<div class="gatsby-highlight">
      <pre class="language-ruby"><code>config<span class="token punctuation">.</span>omniauth <span class="token symbol">:amazon</span><span class="token punctuation">,</span> <span class="token constant">APPID</span><span class="token punctuation">,</span> <span class="token constant">SECRETID</span>
</code></pre>
      </div>
<p>In /config/routes.rb, specify which controller will handle callbacks:</p>
<div class="gatsby-highlight">
      <pre class="language-ruby"><code>devise_for <span class="token symbol">:users</span><span class="token punctuation">,</span> <span class="token symbol">:controllers</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token symbol">:omniauth_callbacks</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">"callbacks"</span> <span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Finally, create a callbacks controller and a method for your provider:</p>
<div class="gatsby-highlight">
      <pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">CallbacksController</span> <span class="token operator">&lt;</span> <span class="token constant">Devise</span><span class="token punctuation">:</span><span class="token symbol">:OmniauthCallbacksController</span>
    <span class="token keyword">def</span> amazon
        <span class="token variable">@user</span> <span class="token operator">=</span> <span class="token constant">User</span><span class="token punctuation">.</span><span class="token function">from_omniauth</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>env<span class="token punctuation">[</span><span class="token string">"omniauth.auth"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        sign_in_and_redirect <span class="token variable">@user</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre>
      </div>
<p>On the login and signup pages you should now see an option to sign-in/sign-up via your provider. I have a recorded a video tutorial of the process if you are a visual learner:</p>
<iframe style="display: block; margin: 0 auto;" width="420" height="315" src="http://www.youtube.com/embed/8DdlW-lzowA" frameborder="0" allowfullscreen>
</iframe></div></div></div><style data-reactid="10"></style></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-b8e603c6e6241e379fb4.js","195351340454287":"component---src-templates-post-js-8aa746c353446545c65f.js","162898551421021":"component---src-pages-404-js-4503918ea3a16cfcdb75.js","263791100135453":"component---src-pages-about-js-c1d78200c10ff383ccf5.js","212839066777427":"component---src-pages-blog-js-becf308e08ee49719f7a.js","35783957827783":"component---src-pages-index-js-249d76a02f25eed8b3ad.js","60335399758886":"path----557518bd178906f8d58a.js","91453965554066":"path---follow-your-dreams-6cde5a15f6d7338261a7.js","37639709099586":"path---building-ruby-cli-gem-f1d64474410cb25dcf4e.js","218513517675003":"path---sinatra-final-project-1d066a549262868b4838.js","40056559369815":"path---rails-devise-and-omniauth-e150375fe4cbd2c9ad67.js","265087652642600":"path---hamburger-animation-css-javascript-5ad896e7304415606915.js","142184262175370":"path---javascript-filter-map-reduce-f7a675442ea2306e2428.js","264864875965979":"path---javascript-call-apply-bind-4ec0c7a5d5e578b547f0.js","226616898669359":"path---building-single-page-app-in-rails-14f7877aa1cdbe9f22e5.js","225592761143491":"path---test-your-rails-app-on-any-device-bdfe305f850f5e70a122.js","172862802906904":"path---wtf-is-jekyll-b084044b00f1e3606f6c.js","144045539617314":"path---comparing-scope-javascript-ruby-python-dafc3ae2e7867e735056.js","179262900017466":"path---how-does-the-internet-work-503d0b9c343004618a6f.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","273950069227526":"path---about-a0e39f21c11f6a62c5ab.js","49683490770531":"path---blog-305808d39d784296cb5f.js","142629428675168":"path---index-a0e39f21c11f6a62c5ab.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-27b0a05b07475d6e6f17.js"}/*]]>*/</script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/blog-gatsby/commons-8b3777e9b7196ecd4564.js","/blog-gatsby/app-b8e603c6e6241e379fb4.js","/blog-gatsby/path---rails-devise-and-omniauth-e150375fe4cbd2c9ad67.js","/blog-gatsby/component---src-templates-post-js-8aa746c353446545c65f.js","/blog-gatsby/component---src-layouts-index-js-27b0a05b07475d6e6f17.js"])/*]]>*/</script></body></html>